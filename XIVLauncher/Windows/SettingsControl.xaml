<UserControl x:Class="XIVLauncher.Windows.SettingsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:dragablz="http://dragablz.net/winfx/xaml/dragablz"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:addon="clr-namespace:XIVLauncher.Addon"
             xmlns:dalamudDiscord="clr-namespace:Dalamud.Discord"
             xmlns:xaml="clr-namespace:XIVLauncher.Xaml"
             xmlns:components="clr-namespace:XIVLauncher.Xaml.Components"
             xmlns:properties="clr-namespace:XIVLauncher.Properties"
             xmlns:windows="clr-namespace:XIVLauncher.Windows"
             xmlns:viewModel="clr-namespace:XIVLauncher.Windows.ViewModel"
             xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
             mc:Ignorable="d"
             TextElement.Foreground="{DynamicResource MaterialDesignBody}"
             Background="{DynamicResource MaterialDesignPaper}"
             TextElement.FontWeight="Medium"
             FontFamily="pack://application:,,,/MaterialDesignThemes.Wpf;component/Resources/Roboto/#Roboto"
             d:DataContext="{d:DesignInstance viewModel:SettingsControlViewModel}">
    <UserControl.Resources>
        <xaml:StringToColorConverter x:Key="StringToColorConverter" />
        <xaml:ChatTypeToFancyNameConverter
                                           x:Key="ChatTypeToFancyNameConverter" />
    </UserControl.Resources>
    <Grid>
        <dragablz:TabablzControl IsEnabled="True" FixedHeaderCount="7" x:Name="SetupTabControl"
                                 Style="{StaticResource MaterialDesignTabablzControlStyle}">
            <TabItem Header="{Binding SettingsGameLoc}">
                <StackPanel Margin="10,10,0,0">
                    <TextBlock HorizontalAlignment="Left" VerticalAlignment="Top"
                               Foreground="{DynamicResource MaterialDesignBody}" Text="{Binding GamePathLoc}" />
                    <components:FolderEntry
                                            Text="{Binding GamePath, UpdateSourceTrigger=PropertyChanged}"
                                            Description="Select a folder" Width="500" VerticalAlignment="Center"
                                            HorizontalAlignment="Left"
                                            Foreground="{DynamicResource MaterialDesignBody}" Margin="0,5,0,0" />
                    <CheckBox Foreground="{DynamicResource MaterialDesignBody}"
                              x:Name="SteamIntegrationCheckBox" Margin="0,15,0,0" Content="{Binding SteamCheckBoxLoc}" />
                    <Label Margin="0,10,0,0" Content="{Binding AdditionalArgumentsLoc}" />
                    <TextBox Width="500" VerticalAlignment="Center"
                             HorizontalAlignment="Left" Foreground="{DynamicResource MaterialDesignBody}"
                             Margin="0,5,0,0" x:Name="LaunchArgsTextBox" />
                    <Button HorizontalAlignment="Left" Click="RunIntegrityCheck_OnClick"
                            IsEnabled="{Binding IsRunIntegrityCheckPossible}"
                            ToolTip="{Binding RunIntegrityCheckTooltipLoc}" Margin="10,20,0,0"
                            Content="{Binding RunIntegrityCheckLoc}" />
                </StackPanel>
            </TabItem>
            <TabItem Header="{Binding SettingsGameSettingsLoc}">
                <StackPanel Margin="10,10,0,0">
                    <TextBlock HorizontalAlignment="Left" VerticalAlignment="Top"
                               Foreground="{DynamicResource MaterialDesignBody}" Text="{Binding DirectXLoc}" />

                    <RadioButton Margin="0, 5, 0, 0" GroupName="dx" IsChecked="True"
                                 x:Name="Dx11RadioButton" Foreground="{DynamicResource MaterialDesignBody}">
                        DirectX 11
                    </RadioButton>
                    <RadioButton GroupName="dx" x:Name="Dx9RadioButton"
                                 Foreground="{DynamicResource MaterialDesignBody}" Checked="Dx9RadioButton_OnChecked"
                                 Unchecked="Dx9RadioButton_OnUnchecked">
                        DirectX 9
                    </RadioButton>

                    <TextBlock x:Name="Dx9DisclaimerTextBlock" Visibility="Hidden"
                               HorizontalAlignment="Left" VerticalAlignment="Top" Foreground="OrangeRed"
                               Margin="0,0,0,0" Text="{Binding DirectX9NoticeLoc}" />
                    <TextBlock HorizontalAlignment="Left" VerticalAlignment="Top"
                               Foreground="{DynamicResource MaterialDesignBody}" Text="{Binding ChooseLanguageLoc}" />
                    <ComboBox SelectedIndex="1" Margin="0, 3, 0, 0" x:Name="LanguageComboBox"
                              Foreground="{DynamicResource MaterialDesignBody}">
                        <ComboBoxItem>日本語</ComboBoxItem>
                        <ComboBoxItem>English</ComboBoxItem>
                        <ComboBoxItem>Deutsch</ComboBoxItem>
                        <ComboBoxItem>Français</ComboBoxItem>
                    </ComboBox>
                </StackPanel>
            </TabItem>
            <TabItem Header="{Binding SettingsAutoLaunchLoc}">
                <Grid>
                    <Grid Margin="10,10,10,0">
                        <TextBlock HorizontalAlignment="Left" VerticalAlignment="Top"
                                   Foreground="{DynamicResource MaterialDesignBody}" Text="{Binding AutoLaunchHintLoc}" />

                        <materialDesign:Card Margin="0,20,0,0" Height="220">
                            <ListView x:Name="AddonListView" Margin="0,0,0,0" Height="220"
                                      MouseUp="AddonListView_OnMouseUp">
                                <ListView.ContextMenu>
                                    <ContextMenu StaysOpen="true">
                                        <MenuItem Header="{Binding RemoveLoc}"
                                                  Click="RemoveAddonEntry_OnClick"
                                                  Foreground="{DynamicResource MaterialDesignBody}" />
                                    </ContextMenu>
                                </ListView.ContextMenu>

                                <ListBox.ItemTemplate>
                                    <DataTemplate DataType="{x:Type addon:AddonEntry}">
                                        <StackPanel Orientation="Horizontal">
                                            <CheckBox IsChecked="{Binding IsEnabled}"
                                                      Checked="ToggleButton_OnChecked"
                                                      Foreground="{DynamicResource MaterialDesignBody}" />
                                            <TextBlock Text="{Binding Addon.Name}"
                                                       Margin="10,0,0,0"
                                                       Foreground="{DynamicResource MaterialDesignBody}" />
                                        </StackPanel>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListView>
                        </materialDesign:Card>

                        <Button Margin="0,0,0,7" HorizontalAlignment="Center"
                                VerticalAlignment="Bottom" Click="AddAddon_OnClick"
                                ToolTip="{Binding AutoLaunchAddNewToolTipLoc}" Content="{Binding AddNewLoc}" />
                    </Grid>
                </Grid>
            </TabItem>

            <TabItem Header="{Binding SettingsInGameLoc}">
                <Grid>
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel Margin="10,10,10,0">
                            <TextBlock HorizontalAlignment="Left" VerticalAlignment="Top"
                                       Foreground="{DynamicResource MaterialDesignBody}" Margin="0,0,0,10"
                                       Text="{Binding InGameAddonDescriptionLoc}" />
                            <CheckBox x:Name="EnableHooksCheckBox"
                                      Content="{Binding InGameAddonEnabledCheckBoxLoc}"
                                      HorizontalAlignment="Left" Margin="0,0,0,0"
                                      Foreground="{DynamicResource MaterialDesignBody}" />

                            <Label Foreground="DarkGray" Margin="0,10,0,5"
                                   Content="{Binding InGameAddonCommandHintLoc}" />

                            <StackPanel
                                        IsEnabled="{Binding ElementName=EnableHooksCheckBox, Path=IsChecked}">
                                <Separator />

                                <Label Foreground="DarkGray" Margin="0,5,0,0" FontStyle="Italic"
                                       HorizontalAlignment="Center" FontSize="13"
                                       Content="{Binding InGameAddonChatSettingsLoc}" />

                                <StackPanel Orientation="Horizontal">
                                    <Label Foreground="{DynamicResource MaterialDesignBody}"
                                           Margin="0,10,0,0" Content="{Binding InGameAddonDiscordBotTokenLoc}" />
                                    <Label Foreground="DarkGray" Margin="0,10,0,0" Cursor="Hand"
                                           MouseUp="OpenWebhookGuideLabel_MouseUp"
                                           Content="{Binding InGameAddonHowLoc}" />
                                </StackPanel>

                                <TextBox x:Name="DiscordBotTokenTextBox"
                                         Margin="10,0,0,0" Width="400"
                                         VerticalAlignment="Center" HorizontalAlignment="Left"
                                         Foreground="{DynamicResource MaterialDesignBody}"
                                         materialDesign:HintAssist.Hint="{Binding InGameAddonDiscordBotTokenLoc}" />

                                <materialDesign:Card Margin="0,10" Height="110">
                                    <ListView x:Name="ChannelListView"
                                              MouseUp="ChannelListView_OnMouseUp" HorizontalAlignment="Stretch">
                                        <ListView.ContextMenu>
                                            <ContextMenu StaysOpen="true">
                                                <MenuItem Header="Remove"
                                                          Click="RemoveChatConfigEntry_OnClick"
                                                          Foreground="{DynamicResource MaterialDesignBody}" />
                                            </ContextMenu>
                                        </ListView.ContextMenu>

                                        <ListBox.ItemTemplate>
                                            <DataTemplate
                                                          DataType="{x:Type dalamudDiscord:ChatTypeConfiguration}">
                                                <StackPanel Orientation="Horizontal">
                                                    <materialDesign:PackIcon
                                                                             Kind="Chat"
                                                                             Foreground="{Binding Color, Converter={StaticResource StringToColorConverter}}" />
                                                    <TextBlock
                                                               Text="{Binding ChatType, Converter={StaticResource ChatTypeToFancyNameConverter}}"
                                                               Margin="10,0,0,0"
                                                               Foreground="{DynamicResource MaterialDesignBody}" />
                                                </StackPanel>
                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                    </ListView>
                                </materialDesign:Card>

                                <Button Margin="0,7,0,10" HorizontalAlignment="Center"
                                        VerticalAlignment="Bottom" Click="AddChannelConfig_OnClick"
                                        ToolTip="Add a new Discord chat channel."
                                        Content="{Binding InGameAddonAddChatChannelLoc}" />
                                <Button Margin="0,7,0,10" HorizontalAlignment="Center"
                                        VerticalAlignment="Bottom" Click="SetDutyFinderNotificationChannel_OnClick"
                                        ToolTip="Set the Duty Finder notification channel."
                                        Content="{Binding InGameAddonSetCfChannelLoc}" />
                                <Button Margin="0,0,0,10" HorizontalAlignment="Center"
                                        VerticalAlignment="Bottom" Click="SetCfPreferredRoleChannel_OnClick"
                                        ToolTip="Set the Roulette Bonus notification channel."
                                        Content="{Binding InGameAddonSetRouletteChannelLoc}" />
                                <Button Margin="0,0,0,20" HorizontalAlignment="Center"
                                        VerticalAlignment="Bottom" Click="SetRetainerNotificationChannel_OnClick"
                                        ToolTip="Set the retainer sale channel."
                                        Content="{Binding InGameAddonSetRetainerChannelLoc}" />

                                <CheckBox x:Name="DisableEmbedsCheckBox"
                                          Content="Disable rich embeds (send smaller messages to Discord)"
                                          HorizontalAlignment="Left" Margin="0,0,0,20"
                                          Foreground="{DynamicResource MaterialDesignBody}" />

                                <CheckBox
                                          x:Name="CheckForDuplicateMessagesCheckBox"
                                          HorizontalAlignment="Left" Margin="0,0,0,5"
                                          Foreground="{DynamicResource MaterialDesignBody}">
                                    <TextBlock Foreground="{DynamicResource MaterialDesignBody}"
                                               Text="{Binding InGameAddonChatDelayDescriptionLoc}" />
                                </CheckBox>

                                <Label Foreground="{DynamicResource MaterialDesignBody}" Margin="0,5,0,0"
                                       Content="{Binding InGameAddonChatDelayLoc}" />

                                <TextBox x:Name="ChatDelayTextBox" Margin="10,0,0,5"
                                         Width="400"
                                         VerticalAlignment="Center" HorizontalAlignment="Left"
                                         Foreground="{DynamicResource MaterialDesignBody}"
                                         materialDesign:HintAssist.Hint="{Binding InGameAddonChatDelayLoc}" />

                                <Label Foreground="{DynamicResource MaterialDesignBody}" Margin="0,5,0,0"
                                       Content="{Binding InGameAddonDiscordEmojiNoteLoc}" />

                                <Label Foreground="{DynamicResource MaterialDesignBody}" Margin="0,5,0,0"
                                       Content="{Binding InGameAddonAtransLeftLoc}" />
                                <TextBox x:Uid="AtransLeftTextBox" x:Name="AtransLeftTextBox" Margin="10,0,0,5"
                                         Width="400"
                                         VerticalAlignment="Center" HorizontalAlignment="Left"
                                         Foreground="{DynamicResource MaterialDesignBody}"
                                         materialDesign:HintAssist.Hint="{Binding InGameAddonAtransLeftHintLoc}" />

                                <Label Foreground="{DynamicResource MaterialDesignBody}" Margin="0,5,0,0"
                                       Content="{Binding InGameAddonAtransRightLoc}" />
                                <TextBox x:Uid="AtransRightTextBox" x:Name="AtransRightTextBox" Margin="10,0,0,5"
                                         Width="400"
                                         VerticalAlignment="Center" HorizontalAlignment="Left"
                                         Foreground="{DynamicResource MaterialDesignBody}"
                                         materialDesign:HintAssist.Hint="{Binding InGameAddonAtransRightHintLoc}" />

                                <Label Foreground="{DynamicResource MaterialDesignBody}" Margin="0,5,0,0"
                                       Content="{Binding InGameAddonHqLoc}" />
                                <TextBox x:Uid="HqTextBox" x:Name="HqTextBox" Margin="10,0,0,5"
                                         Width="400"
                                         VerticalAlignment="Center" HorizontalAlignment="Left"
                                         Foreground="{DynamicResource MaterialDesignBody}"
                                         materialDesign:HintAssist.Hint="{Binding InGameAddonHqHintLoc}" />
                                <Label HorizontalAlignment="Left" VerticalAlignment="Top" Foreground="{DynamicResource MaterialDesignBody}" Margin="5,10,0,0"
                                       Content="{Binding InGameAddonInjectionDelayLoc}" />

                                <StackPanel Orientation="Horizontal">
                                    <xctk:DecimalUpDown x:Name="InjectionDelayUpDown" Margin="10,0,0,10" Width="60" HorizontalAlignment="Left" Value="0"/>
                                    <Label Foreground="{DynamicResource MaterialDesignBody}" Margin="0,0,0,0"
                                           Content="ms" ToolTip="{Binding InGameAddonInjectionDelayDescriptionLoc}"/>
                                </StackPanel>

                                <Separator />
                                
                                <Label Foreground="DarkGray" Margin="0,5,0,5"
                                       Content="{Binding UniversalisHintLoc}" />
                                <CheckBox x:Name="MbUploadOptOutCheckBox"
                                          Content="{Binding UniversalisOptOutLoc}"
                                          HorizontalAlignment="Left" Margin="0,0,0,5" Foreground="DarkGray" />
                            </StackPanel>
                        </StackPanel>
                    </ScrollViewer>
                </Grid>
            </TabItem>
            <TabItem Header="Plugins">
                <Grid Margin="10,10,10,0">
                    <TextBlock HorizontalAlignment="Left" VerticalAlignment="Top"
                               Foreground="{DynamicResource MaterialDesignBody}" Text="{Binding PluginsDescriptionLoc}" />

                    <materialDesign:Card Margin="0,20,0,0" Height="230">
                        <ListView x:Name="PluginListView" Margin="0,0,0,0" Height="230"
                                  Foreground="{DynamicResource MaterialDesignBody}">
                            <ListView.ContextMenu>
                                <ContextMenu StaysOpen="true">
                                    <MenuItem Header="{Binding PluginsToggleLoc}"
                                              Click="TogglePlugin_OnClick"
                                              Foreground="{DynamicResource MaterialDesignBody}" />
                                </ContextMenu>
                            </ListView.ContextMenu>
                        </ListView>
                    </materialDesign:Card>

                    <TextBlock HorizontalAlignment="Left" VerticalAlignment="Bottom"
                               Foreground="{DynamicResource MaterialDesignBody}" Margin="0,0,0,10" Text="{Binding PluginsInstallHintLoc}"/>
                </Grid>
            </TabItem>
            <TabItem Header="{Binding SettingsPatchingLoc}">
                <StackPanel>
                    <CheckBox x:Name="AskBeforePatchingCheckBox"
                              Content="{Binding AskBeforePatchLoc}"
                              HorizontalAlignment="Left" Margin="10,10,0,15"
                              Foreground="{DynamicResource MaterialDesignBody}" />

                    <TextBlock HorizontalAlignment="Left" VerticalAlignment="Top"
                               Foreground="{DynamicResource MaterialDesignBody}" Text="{Binding PatchPathLoc}" Margin="10,0,0,0"/>
                    <components:FolderEntry Text="{Binding PatchPath, UpdateSourceTrigger=PropertyChanged}"
                                            Description="Select a folder" Width="500" VerticalAlignment="Center"
                                            HorizontalAlignment="Left"
                                            Foreground="{DynamicResource MaterialDesignBody}" Margin="10,0,0,0" />

                    <Label HorizontalAlignment="Left" VerticalAlignment="Top" Foreground="{DynamicResource MaterialDesignBody}" Margin="5,10,0,0"
                           Content="{Binding PatchSpeedLimitLoc}" />

                    <StackPanel Orientation="Horizontal">
                        <xctk:DecimalUpDown x:Name="SpeedLimiterUpDown" Margin="10,0,0,0" Width="60" HorizontalAlignment="Left" Value="0"/>
                        <Label Foreground="{DynamicResource MaterialDesignBody}" Margin="0,0,0,0"
                               Content="MB/s" />
                    </StackPanel>

                    <CheckBox x:Name="KeepPatchesCheckBox"
                              Content="{Binding KeepPatchesLoc}"
                              HorizontalAlignment="Left" Margin="10,10,0,15"
                              Foreground="{DynamicResource MaterialDesignBody}" />
                    
                </StackPanel>

            </TabItem>
            <TabItem Header="{Binding SettingsAboutLoc}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <Grid>
                        <StackPanel Margin="10,10,10,0">
                            <TextBlock HorizontalAlignment="Left" VerticalAlignment="Top"
                                       x:Name="VersionLabel" Foreground="{DynamicResource MaterialDesignBody}">
                                XIVLauncher
                            </TextBlock>
                            <TextBlock HorizontalAlignment="Left" VerticalAlignment="Top"
                                       Foreground="{DynamicResource MaterialDesignBody}" Text="{Binding CreditsLoc}"/>

                            <Button Style="{DynamicResource MaterialDesignFlatButton}"
                                    HorizontalAlignment="Left"
                                    x:Name="DiscordButton" Margin="0,10,0,0">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="Discord" />
                                    <TextBlock Margin="8 0 0 0" VerticalAlignment="Center" Text="{Binding JoinDiscordLoc}"/>
                                </StackPanel>
                            </Button>
                            <Button Style="{DynamicResource MaterialDesignFlatButton}"
                                    HorizontalAlignment="Left"
                                    x:Name="GitHubButton" Click="GitHubButton_OnClick" Margin="0 0 0 0">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="GithubCircle" />
                                    <TextBlock Margin="8 0 0 0" VerticalAlignment="Center">GitHub</TextBlock>
                                </StackPanel>
                            </Button>
                            <Button Style="{DynamicResource MaterialDesignFlatButton}"
                                    HorizontalAlignment="Left"
                                    x:Name="BackupToolButton" Click="BackupToolButton_OnClick">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="Wrench" />
                                    <TextBlock Margin="8 0 0 0" VerticalAlignment="Center" Text="{Binding StartBackupToolLoc}"/>
                                </StackPanel>
                            </Button>
                            <Button Style="{DynamicResource MaterialDesignFlatButton}"
                                    HorizontalAlignment="Left"
                                    x:Name="OriginalLauncherButton" Click="OriginalLauncherButton_OnClick">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="Launch" />
                                    <TextBlock Margin="8 0 0 0" VerticalAlignment="Center" Text="{Binding StartOriginalLauncherLoc}"/>
                                </StackPanel>
                            </Button>
                            <StackPanel Orientation="Horizontal">
                                <CheckBox x:Name="UidCacheCheckBox"
                                          Content="{Binding EnabledUidCacheLoc}"
                                          HorizontalAlignment="Left" Margin="0,0,0,0" Foreground="DarkGray" />
                                <Button Style="{DynamicResource MaterialDesignFlatButton}"
                                        HorizontalAlignment="Left"
                                        Click="ResetCacheButton_OnClick" Margin="0 0 0 0">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Margin="0 0 0 0" VerticalAlignment="Center"
                                                   Foreground="DarkGray" FontSize="11">
                                            Reset
                                        </TextBlock>
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal">
                                <CheckBox x:Name="EncryptedArgumentsCheckbox"
                                          Content="{Binding EnableEncryptionLoc}"
                                          HorizontalAlignment="Left" Margin="0,0,0,0" Foreground="DarkGray" />
                            </StackPanel>
                        </StackPanel>

                        <Image Source="pack://application:,,,/Resources/logo.png" Width="200"
                               HorizontalAlignment="Left" Margin="500,0,0,0" Opacity="0.8"
                               RenderOptions.BitmapScalingMode="HighQuality" />
                    </Grid>
                </ScrollViewer>
            </TabItem>
        </dragablz:TabablzControl>
        <Button Style="{StaticResource MaterialDesignFloatingActionMiniLightButton}"
                ToolTip="Open Plugins Folder" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0,0,60,10"
                Click="PluginsFolderButton_Click">
            <materialDesign:PackIcon Kind="FolderOpen" Height="24" Width="24" />
        </Button>
        <Button Style="{StaticResource MaterialDesignFloatingActionMiniLightButton}"
                ToolTip="Save Settings" VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="0,0,10,10"
                Command="{x:Static materialDesign:Transitioner.MoveNextCommand}"
                Click="AcceptButton_Click">
            <materialDesign:PackIcon Kind="Check" Height="24" Width="24" />
        </Button>
    </Grid>
</UserControl>